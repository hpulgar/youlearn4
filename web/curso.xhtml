<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
 <h:head>


	<!--Meta Tags-->
        <meta name="viewport" content="width=device-width; initial-scale=1.0"></meta>
	
		
	<!--Title-->
	<title>Youlearn - Curso </title>
  <ui:include src="utilidades.xhtml" />

	
<!-- END head -->
   </h:head>

<!-- BEGIN body -->
<h:body id="top" class="loading">
        <style>
          
            .portfolio-single-cols .col-2 {
	float: left;
	width: 30%;
        padding-left: 5%;
}
            
            
        </style>

	<!-- BEGIN #header-wrapper -->
	<div id="header" >
                        
                  <ui:include src="header.xhtml" />
        </div>
	
	<!-- BEGIN .page-header -->
	<div class="page-header clearfix">
		
		<div class="page-header-inner clearfix">
		
		<div class="page-title">	
                    <br/>
			<h2>Curso</h2>
                         <h:messages errorStyle="color: red" class="msg fail"/>
			<div class="page-title-block"></div>
		</div>
		
		
		
		</div>
		
	<!-- END .page-header -->
	</div>
	
	<!-- BEGIN .content-wrapper -->
	<div class="content-wrapper page-content-wrapper clearfix">
		
		<!-- BEGIN .main-content -->
		<!-- BEGIN .main-content -->
		<div class="main-content page-content">
			
			<!-- BEGIN .inner-content-wrapper -->
			<div class="inner-content-wrapper">
				
				<ul class="event-list">
				
					<!-- BEGIN .event-wrapper -->
                                         <h:form id="curso">
                                        <c:forEach items="#{cursoController.verCurso(cursoController.idCurso)}" var="cs" >
					<li class="event-wrapper event-full event-single clearfix">
                                                   
                                                         <div class="event-date">
                                                            <div class="course-desc-wrapper clearfix">
                                                                <img src="#{cs.idUsuario.imagen_foto_perfil}" alt="" class="course-image" style='height: 100%; width: 100%;' />
                                                            </div> 
                                                             <div class="event-m">#{cs.fecha.toGMTString().substring(2,6)}</div>
                                                             <div class="event-d">#{cs.fecha.day}</div>	
                                                             <div class="event-m">#{cs.fecha.year}</div>
                                                             
                                                            
                                                        </div>
                                                     
                                                    <div class="event-info">
                                                        
                                      <ul class="portfolio-single-cols">
							
					<li class="col-1">
						<div class="title1 clearfix">
							<h4>Introduccion</h4>
							<div class="title-block"></div>
						</div>
						<p><h:outputText value="#{cs.introduccionCurso}" escape="false" /></p>
					</li>
							
					<li class="col-2">
						<div class="title1 clearfix">
							<h4>Detalles curso</h4>
							<div class="title-block"></div>
						</div>
							
						<ul class="portfolio-details">
							<li class="clearfix"><strong>Nombre</strong> <span>#{cs.nomCurso}</span></li>
							<li class="clearfix"><strong>Categoria</strong> <span>#{cs.idCat.idCategoria.nomCat}</span></li>
							<li class="clearfix"><strong>Subcategoria</strong> <span>#{cs.idCat.nomSubcat}</span></li>
							<li class="clearfix"><strong>Autor</strong> <span>#{cs.idUsuario.username}</span></li>
						</ul>
								
					</li>

				</ul>
                                            

                                                        <img src="#{cs.imagenPortadaCurso}"  class="event-image" />

                                                            <div style="height: 30px;"></div>
                                                            
                                                            
                                                            <div class="event-meta">
                                                                 <h:form>
                                                                     
                                                                     
                                                                     <p:commandButton disabled="#{!inscripcionCursoController.suscripcionCurso(cs.idCurso,usuarioController.id_user)}" value="#{inscripcionCursoController.nboton(cs.idCurso,usuarioController.id_user,usuarioController.creditosUsuario(usuarioController.id_user))}" style="float: left">
                                                                         <f:actionListener binding="#{inscripcionCursoController.crearSuscripcion(usuarioController.creditosUsuario(usuarioController.id_user))}"/>  
                                                                         <f:actionListener binding="#{usuarioController.actualizaCreditosCurso(usuarioController.usuarioCreditos,usuarioController.id_user)}"/>  
                                                                     </p:commandButton>
                                                                     <p:commandButton action="#{cursoController.irTablero(cs.idCurso)}" value="Ir al tablero del cuso" style="float: right"/>
                                                                 </h:form><br></br>	
                                                                
                                                    
                                                            </div>
                                                            <br/><br></br>
                                                            <table style="width:100%;">
				<thead>
					<tr>
						<th>Seguidores</th>
						<th>Suscriptores</th>
						
					</tr>
				</thead>
				<tbody>
					<tr>
						<td data-title="Column 1">#{inscripcionCursoController.seguidores(cs.idCurso)}</td>
						<td data-title="Column 1">#{inscripcionCursoController.suscriptores(cs.idCurso)}</td>
						
					</tr>
					
						
					
				</tbody>
			</table>
                                                                <br/>
                                                              
                                          <div class="title1 clearfix">
					  <h4>Descripcion</h4>
                                          <div class="title-block"></div>
					  </div>
                                                                <p><h:outputText value="#{cs.descripcionCurso}" escape="false" /></p>
                                                                <br/>
                                           <div class="title1 clearfix">
					  <h4>Contenido</h4>
                                          <div class="title-block"></div>
					  </div>
                                         <p><h:outputText value="#{cs.contenidos}" escape="false" /></p>
                                         
                                           <div class="title1 clearfix">
					  <h4>Unidades</h4>
                                          <div class="title-block"></div>
					  </div>
                                         <p><h:outputText rendered="#{empty contenidosController.verTodosCont(cursoController.idCurso)}" value="El administrador del curso aun no ha creado unidades"/></p>

                                                    </div>
                                            
					<!-- END .event-wrapper -->
					</li>
                                                </c:forEach>
                                            </h:form>
				</ul>
			
			<!-- END .inner-content-wrapper Begin Contenidos -->
                        
                         <div id="tabs-tab-title-2">
						
						
                             <p:panel rendered="#{not empty contenidosController.verTodosCont(cursoController.idCurso)}">
						<table style="width:100%;">
							<thead>
								<tr>
									<th>Unidad</th>
									<th>Nombre Unidad</th>
									<th>Fecha</th>
									
								</tr>
							</thead>
							<tbody>
                                                            <h:form id="lista_contenidos">
                                                                 <c:forEach items="#{contenidosController.verTodosCont(cursoController.idCurso)}" var="cont">
                                                                    <tr>
                                                                   
                                                                            <td data-title="Column 1">#{cont.unidad}</td>
                                                                            <td data-title="Column 1">  <h:commandLink rendered="#{inscripcionCursoController.esSeguidor(usuarioController.id_user, cursoController.idCurso) eq 'true' and cont.tipoAlumno eq '1'}" value="#{cont.nombreUnidad}" action="#{contenidosController.verContenidoI(cont.idContenido)}"/>  
                                                                                <h:outputText rendered="#{inscripcionCursoController.esSeguidor(usuarioController.id_user, cursoController.idCurso) eq 'true' and cont.tipoAlumno eq '2'}" value="Este contenido está solo disponibe para suscriptores"/>
                                                        <h:commandLink rendered="#{inscripcionCursoController.esSuscriptor(usuarioController.id_user, cursoController.idCurso) eq 'true' and cont.tipoAlumno eq '2'}" value="#{cont.nombreUnidad}" action="#{contenidosController.verContenidoI(cont.idContenido)}"/>  
                                                        <h:commandLink rendered="#{inscripcionCursoController.esSuscriptor(usuarioController.id_user, cursoController.idCurso) eq 'true' and cont.tipoAlumno eq '1' }"  value="#{cont.nombreUnidad}" action="#{contenidosController.verContenidoI(cont.idContenido)}"/>  
                                                        <h:commandLink rendered="#{cont.tipoAlumno eq '3' }"  value="#{cont.nombreUnidad}" action="#{contenidosController.verContenidoI(cont.idContenido)}"/>  
                                                                            
                                                                            </td>
                                                                       
                                                                            
                                                                            <td data-title="Column 1">#{cont.fecha}</td>
                                                                         
                                                                    </tr>
                                                                 </c:forEach>
                                              
								</h:form>
                                                            
							</tbody>
						</table>
                                 </p:panel>
                               
                             
						
					</div>
                        
                      
                        
                       
                        
			</div>
                        
                       
                        
                        
			
		<!-- END .main-content -->
		</div>
		
		
	
	<!-- END .content-wrapper -->
	</div>
	
	
	          <ui:include src="Footer.xhtml" />

<!-- END body -->
</h:body>
</html>